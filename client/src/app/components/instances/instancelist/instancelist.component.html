<!-- /.row-->
<div class="card">
  <div class="card-header">
    <h2>{{'Instances' | localize}}</h2>
  </div>
  <div class="card-body" id="container">
    <div class="input-group mb-2">
      <div class="input-group-prepend">
        <div class="input-group-text">{{'Search' | localize}}</div>
      </div>
      <input type="text" #searchInput [(ngModel)]="searchText" class="form-control form-control-lg" />
    </div>

    <table cdk-table [dataSource]="dataSourceFlt" matSort (matSortChange)="sortData($event)"
      class="table table-responsive-sm table-striped table-sm">

      <ng-container cdkColumnDef="room">
        <th cdk-header-cell *cdkHeaderCellDef mat-sort-header="room" disableClear>{{'Room' | localize}}</th>
        <td cdk-cell *cdkCellDef="let instance"> {{instance.roomid}} </td>
      </ng-container>

      <ng-container cdkColumnDef="port">
        <th cdk-header-cell *cdkHeaderCellDef mat-sort-header="port" disableClear>{{'Port' | localize}}</th>
        <td cdk-cell *cdkCellDef="let instance"> {{instance.port}} </td>
      </ng-container>

      <ng-container cdkColumnDef="displayName">
        <th cdk-header-cell *cdkHeaderCellDef mat-sort-header="displayName" disableClear>{{'Homekit name' | localize}}
        </th>
        <td cdk-cell *cdkCellDef="let instance"> {{instance.displayName}} </td>
      </ng-container>

      <ng-container cdkColumnDef="pincode">
        <th cdk-header-cell *cdkHeaderCellDef>{{'PinCode' | localize}}</th>
        <td cdk-cell *cdkCellDef="let instance"> {{instance.pincode}} </td>
      </ng-container>

      <ng-container cdkColumnDef="control">
        <th cdk-header-cell *cdkHeaderCellDef width="25%"></th>
        <td cdk-cell *cdkCellDef="let instance">
          <button type="button" class="btn btn-success" (click)="editObject(instance)">{{'Edit' | localize}}</button>
          &nbsp;
          <button *ngIf="instance.canDelete===true" type="button" class="btn btn-danger"
            (click)="selectObject(instance)" data-toggle="modal" data-target="#deleteProgramDialog">{{'Delete'
            | localize}}</button>
        </td>
      </ng-container>

      <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
      <tr cdk-row *cdkRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <span *ngIf="noData===true">
      {{'No data' | localize}}
    </span>
  </div>
  <div class="card-footer" id="container_footer">
  </div>
</div>


<div class="modal fade" id="deleteProgramDialog" tabindex="-1" role="dialog" aria-labelledby="deleteInstanceDialogLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-danger" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteIntanceDialogLabel">{{'Delete' | localize}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <span *ngIf="selectedObject">
          {{'Are you sure you want to remove %s? All your devices will be reassigned to the default Instance.' |
          localize : [selectedObject.displayName]}}</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">{{'Dismiss' | localize}}</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">{{'Yes, kick it baby' | localize}}</button>
      </div>
    </div>
  </div>
</div>
